{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[25],{CwAd:function(module,__webpack_exports__,__webpack_require__){\"use strict\";__webpack_require__.d(__webpack_exports__,\"a\",(function(){return ToastServiceService}));var tslib__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(\"mrSG\"),_angular_core__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(\"fXoL\"),_ionic_angular__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(\"TEn/\");let ToastServiceService=(()=>{class ToastServiceService{constructor(toastController){this.toastController=toastController}present(message,position=\"bottom\",durationMs=2e3){return Object(tslib__WEBPACK_IMPORTED_MODULE_0__.a)(this,void 0,void 0,(function*(){(yield this.toastController.create({message:message,position:position,duration:durationMs,cssClass:\"toast-message\"})).present()}))}}return ToastServiceService.ɵfac=function(t){return new(t||ToastServiceService)(_angular_core__WEBPACK_IMPORTED_MODULE_1__.Qb(_ionic_angular__WEBPACK_IMPORTED_MODULE_2__.M))},ToastServiceService.ɵprov=_angular_core__WEBPACK_IMPORTED_MODULE_1__.Db({token:ToastServiceService,factory:ToastServiceService.ɵfac,providedIn:\"root\"}),ToastServiceService})()},F4UR:function(module,__webpack_exports__,__webpack_require__){\"use strict\";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,\"LoginPageModule\",(function(){return login_module_LoginPageModule}));var common=__webpack_require__(\"ofXK\"),fesm2015_forms=__webpack_require__(\"3Pt+\"),ionic_angular=__webpack_require__(\"TEn/\"),router=__webpack_require__(\"tyNb\"),tslib_es6=__webpack_require__(\"mrSG\"),core=__webpack_require__(\"fXoL\"),toast_service_service=__webpack_require__(\"CwAd\"),auth_service_service=__webpack_require__(\"UPSQ\"),loading_service_service=__webpack_require__(\"oWMX\"),ngx=__webpack_require__(\"GGTb\"),_ivy_ngcc_ngx=__webpack_require__(\"up+p\");function LoginPage_ng_container_7_div_1_Template(rf,ctx){if(1&rf&&(core.Mb(0,\"div\",18),core.hc(1),core.Lb()),2&rf){const validation_r2=core.Wb().$implicit;core.xb(1),core.jc(\" \",validation_r2.message,\" \")}}function LoginPage_ng_container_7_Template(rf,ctx){if(1&rf&&(core.Kb(0),core.gc(1,LoginPage_ng_container_7_div_1_Template,2,1,\"div\",17),core.Jb()),2&rf){const validation_r2=ctx.$implicit,ctx_r0=core.Wb();core.xb(1),core.Zb(\"ngIf\",ctx_r0.Form.get(\"username\").hasError(validation_r2.type)&&ctx_r0.Form.get(\"username\").dirty&&ctx_r0.Form.get(\"username\").touched)}}function LoginPage_ng_container_11_div_1_Template(rf,ctx){if(1&rf&&(core.Mb(0,\"div\",18),core.hc(1),core.Lb()),2&rf){const validation_r5=core.Wb().$implicit;core.xb(1),core.jc(\" \",validation_r5.message,\" \")}}function LoginPage_ng_container_11_Template(rf,ctx){if(1&rf&&(core.Kb(0),core.gc(1,LoginPage_ng_container_11_div_1_Template,2,1,\"div\",17),core.Jb()),2&rf){const validation_r5=ctx.$implicit,ctx_r1=core.Wb();core.xb(1),core.Zb(\"ngIf\",ctx_r1.Form.get(\"password\").hasError(validation_r5.type)&&ctx_r1.Form.get(\"password\").dirty&&ctx_r1.Form.get(\"password\").touched)}}const routes=[{path:\"\",component:(()=>{class LoginPage{constructor(navCtrl,formBuilder,toast,api,loading,fb,googlePlus){this.navCtrl=navCtrl,this.formBuilder=formBuilder,this.toast=toast,this.api=api,this.loading=loading,this.fb=fb,this.googlePlus=googlePlus,this.emailPattern=/^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,4}$/,this.validation_messages={username:[{type:\"required\",message:\"Email is required.\"},{type:\"pattern\",message:\"Enter a valid email.\"}],password:[{type:\"required\",message:\"Password is required.\"},{type:\"minlength\",message:\"Password must be at least 8 characters .\"}]},this.Form=formBuilder.group({username:[\"\",fesm2015_forms.n.compose([fesm2015_forms.n.required,fesm2015_forms.n.pattern(this.emailPattern)])],password:[\"\",fesm2015_forms.n.compose([fesm2015_forms.n.maxLength(30),fesm2015_forms.n.minLength(8),fesm2015_forms.n.required])]})}ngOnInit(){}goToSignup(){this.navCtrl.navigateForward(\"/signup\")}goToResetPassword(){this.navCtrl.navigateForward(\"/reset-password\")}onSubmitLogin(){if(this.Form.valid){const formData=this.Form.value;console.log(formData),console.log(\"login loading\"),this.loading.present(),this.api.login(formData.username,formData.password).then(res=>{console.log(res),this.loading.dismiss();const user=JSON.stringify(res.user);localStorage.setItem(\"userData\",user),this.navCtrl.navigateRoot([\"tabs/home\"])},error=>{console.log(error),this.toast.present(error),this.loading.dismiss()})}else this.toast.present(\"Please check your information\",\"bottom\")}facebookLogin(){return Object(tslib_es6.a)(this,void 0,void 0,(function*(){try{let facebookResponse=yield this.fb.login([\"public_profile\",\"email\"]);this.loginWithFacebook(facebookResponse.authResponse.accessToken)}catch(err){console.log(\"Error logging in\",err),this.toast.present(err.message)}}))}loginWithFacebook(access_token){console.log(this.Form.value),console.log(\"login loading\"),this.loading.present(),this.api.loginWithFacebooke(access_token).then(res=>{console.log(res),this.loading.dismiss();const user=JSON.stringify(res.user);localStorage.setItem(\"userData\",user),this.navCtrl.navigateRoot([\"tabs/home\"])},error=>{console.log(error),this.toast.present(error),this.loading.dismiss()})}loginWithGoogle(access_token){console.log(this.Form.value),console.log(\"login loading\"),this.loading.present(),this.api.loginWithGoogle(access_token).then(res=>{console.log(res),this.loading.dismiss();const user=JSON.stringify(res.user);localStorage.setItem(\"userData\",user),this.navCtrl.navigateRoot([\"tabs/home\"])},error=>{console.log(error),this.toast.present(error),this.loading.dismiss()})}googleLogin(){console.log(\"in\"),this.googlePlus.login({}).then(res=>{console.log(res);const user=res;console.log(user.accessToken),this.loginWithGoogle(user.accessToken)}).catch(error=>{this.toast.present(\"There is an error please try again\"),console.log(error)})}}return LoginPage.ɵfac=function(t){return new(t||LoginPage)(core.Hb(ionic_angular.H),core.Hb(fesm2015_forms.a),core.Hb(toast_service_service.a),core.Hb(auth_service_service.a),core.Hb(loading_service_service.a),core.Hb(ngx.a),core.Hb(_ivy_ngcc_ngx.a))},LoginPage.ɵcmp=core.Bb({type:LoginPage,selectors:[[\"app-login\"]],decls:27,vars:3,consts:[[1,\"ion-text-center\"],[\"src\",\"assets/imgs/login/logo.png\",\"alt\",\"\",1,\"logo\"],[\"novalidate\",\"\",3,\"formGroup\",\"submit\"],[1,\"ion-text-center\",\"inputs_container\"],[\"placeholder\",\"Email\",\"formControlName\",\"username\"],[1,\"validation-errors\"],[4,\"ngFor\",\"ngForOf\"],[\"placeholder\",\"Password\",\"type\",\"password\",\"formControlName\",\"password\"],[1,\"button_container\"],[\"expand\",\"full\",\"shape\",\"round\",\"type\",\"submit\",1,\"singup\"],[1,\"forget_password\",3,\"click\"],[1,\"social_buttons_container\"],[\"expand\",\"full\",\"shape\",\"round\",1,\"face_button\",3,\"click\"],[\"expand\",\"full\",\"shape\",\"round\",1,\"google_button\",3,\"click\"],[1,\"footer\"],[1,\"forget_password\"],[3,\"click\"],[\"class\",\"error-message\",4,\"ngIf\"],[1,\"error-message\"]],template:function(rf,ctx){1&rf&&(core.Mb(0,\"ion-content\",0),core.Mb(1,\"div\"),core.Ib(2,\"img\",1),core.Lb(),core.Mb(3,\"form\",2),core.Ub(\"submit\",(function(){return ctx.onSubmitLogin()})),core.Mb(4,\"div\",3),core.Ib(5,\"ion-input\",4),core.Lb(),core.Mb(6,\"div\",5),core.gc(7,LoginPage_ng_container_7_Template,2,1,\"ng-container\",6),core.Lb(),core.Mb(8,\"div\",3),core.Ib(9,\"ion-input\",7),core.Lb(),core.Mb(10,\"div\",5),core.gc(11,LoginPage_ng_container_11_Template,2,1,\"ng-container\",6),core.Lb(),core.Mb(12,\"div\",8),core.Mb(13,\"ion-button\",9),core.hc(14,\"SIGN IN\"),core.Lb(),core.Lb(),core.Lb(),core.Mb(15,\"p\",10),core.Ub(\"click\",(function(){return ctx.goToResetPassword()})),core.hc(16,\" Forgot your password? \"),core.Lb(),core.Mb(17,\"div\",11),core.Mb(18,\"ion-button\",12),core.Ub(\"click\",(function(){return ctx.facebookLogin()})),core.hc(19,\"Connect with Facebook \"),core.Lb(),core.Mb(20,\"ion-button\",13),core.Ub(\"click\",(function(){return ctx.googleLogin()})),core.hc(21,\"Connect with Google \"),core.Lb(),core.Lb(),core.Mb(22,\"div\",14),core.Mb(23,\"span\",15),core.hc(24,\"Don’t have an account? \"),core.Lb(),core.Mb(25,\"span\",16),core.Ub(\"click\",(function(){return ctx.goToSignup()})),core.hc(26,\"SignUp\"),core.Lb(),core.Lb(),core.Lb()),2&rf&&(core.xb(3),core.Zb(\"formGroup\",ctx.Form),core.xb(4),core.Zb(\"ngForOf\",ctx.validation_messages.username),core.xb(4),core.Zb(\"ngForOf\",ctx.validation_messages.password))},directives:[ionic_angular.h,fesm2015_forms.o,fesm2015_forms.k,fesm2015_forms.e,ionic_angular.m,ionic_angular.L,fesm2015_forms.j,fesm2015_forms.c,common.h,ionic_angular.d,common.i],styles:[\"ion-content[_ngcontent-%COMP%]{--background:var(--page-background)}div[_ngcontent-%COMP%]{margin-top:5vh}div[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{width:30%}.singup[_ngcontent-%COMP%]{--background:linear-gradient(235deg,#08d3ff,#178dd5 0,#ff62a5);margin-top:5vh;height:7vh}.inputs_container[_ngcontent-%COMP%]{padding-left:10vw;padding-right:10vw;margin-top:3vh}ion-input[_ngcontent-%COMP%]{background:#fff;height:7vh;border-radius:25px;color:#9b9b9b;--placeholder-color:#9b9b9b;--placeholder-opacity:1}.button_container[_ngcontent-%COMP%]{padding-left:10vw;padding-right:10vw}.social_buttons_container[_ngcontent-%COMP%]{padding-left:15vw;padding-right:15vw}.face_button[_ngcontent-%COMP%]{--background:#2672cb}.google_button[_ngcontent-%COMP%]{--background:#fc3850;margin-top:2vh}.forget_password[_ngcontent-%COMP%]{color:#9b9b9b}.footer[_ngcontent-%COMP%]{margin-top:4vh}.validation-errors[_ngcontent-%COMP%]{padding-left:20px}.error-message[_ngcontent-%COMP%]{color:red}\"]}),LoginPage})()}];let login_routing_module_LoginPageRoutingModule=(()=>{class LoginPageRoutingModule{}return LoginPageRoutingModule.ɵmod=core.Fb({type:LoginPageRoutingModule}),LoginPageRoutingModule.ɵinj=core.Eb({factory:function(t){return new(t||LoginPageRoutingModule)},imports:[[router.i.forChild(routes)],router.i]}),LoginPageRoutingModule})(),login_module_LoginPageModule=(()=>{class LoginPageModule{}return LoginPageModule.ɵmod=core.Fb({type:LoginPageModule}),LoginPageModule.ɵinj=core.Eb({factory:function(t){return new(t||LoginPageModule)},imports:[[common.b,fesm2015_forms.g,ionic_angular.D,fesm2015_forms.m,login_routing_module_LoginPageRoutingModule]]}),LoginPageModule})()},oWMX:function(module,__webpack_exports__,__webpack_require__){\"use strict\";__webpack_require__.d(__webpack_exports__,\"a\",(function(){return LoadingServiceService}));var tslib__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(\"mrSG\"),_angular_core__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(\"fXoL\"),_ionic_angular__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(\"TEn/\");let LoadingServiceService=(()=>{class LoadingServiceService{constructor(loadingController){this.loadingController=loadingController,this.isLoading=!1,this.isNonRestrictedLoading=!1}present(){this.isLoading=!0,this.loadingController.create({duration:3e3,spinner:\"crescent\",cssClass:\"loading-content\",showBackdrop:!1}).then(createdLoader=>{createdLoader.present().then(()=>{console.log(\"presented\"),this.isLoading||this.loadingController.dismiss()})})}presentNonRestrictedLoading(){this.isNonRestrictedLoading=!0,this.loadingController.create({spinner:\"crescent\",cssClass:\"loading-content\",showBackdrop:!1}).then(createdLoader=>{createdLoader.present().then(()=>{console.log(\"presented\"),this.isNonRestrictedLoading||this.loadingController.dismiss()})})}dismissNonRestrictedLoading(){return Object(tslib__WEBPACK_IMPORTED_MODULE_0__.a)(this,void 0,void 0,(function*(){(this.isNonRestrictedLoading=!0)&&(this.loadingController.dismiss(),console.log(\"dismissed\")),this.isNonRestrictedLoading=!1}))}dismiss(){return Object(tslib__WEBPACK_IMPORTED_MODULE_0__.a)(this,void 0,void 0,(function*(){(this.isLoading=!0)&&(this.loadingController.dismiss(),console.log(\"dismissed\")),this.isLoading=!1}))}}return LoadingServiceService.ɵfac=function(t){return new(t||LoadingServiceService)(_angular_core__WEBPACK_IMPORTED_MODULE_1__.Qb(_ionic_angular__WEBPACK_IMPORTED_MODULE_2__.F))},LoadingServiceService.ɵprov=_angular_core__WEBPACK_IMPORTED_MODULE_1__.Db({token:LoadingServiceService,factory:LoadingServiceService.ɵfac,providedIn:\"root\"}),LoadingServiceService})()}}]);","extractedComments":[]}