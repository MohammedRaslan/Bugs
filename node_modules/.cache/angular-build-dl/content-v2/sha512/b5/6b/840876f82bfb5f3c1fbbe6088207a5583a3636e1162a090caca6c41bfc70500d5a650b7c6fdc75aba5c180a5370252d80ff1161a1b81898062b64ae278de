!function(){function n(n,e){var i;if("undefined"==typeof Symbol||null==n[Symbol.iterator]){if(Array.isArray(n)||(i=function(n,e){if(!n)return;if("string"==typeof n)return t(n,e);var i=Object.prototype.toString.call(n).slice(8,-1);"Object"===i&&n.constructor&&(i=n.constructor.name);if("Map"===i||"Set"===i)return Array.from(n);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return t(n,e)}(n))||e&&n&&"number"==typeof n.length){i&&(n=i);var o=0,a=function(){};return{s:a,n:function(){return o>=n.length?{done:!0}:{done:!1,value:n[o++]}},e:function(n){throw n},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,c=!0,r=!1;return{s:function(){i=n[Symbol.iterator]()},n:function(){var n=i.next();return c=n.done,n},e:function(n){r=!0,l=n},f:function(){try{c||null==i.return||i.return()}finally{if(r)throw l}}}}function t(n,t){(null==t||t>n.length)&&(t=n.length);for(var e=0,i=new Array(t);e<t;e++)i[e]=n[e];return i}function e(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}function i(n,t){for(var e=0;e<t.length;e++){var i=t[e];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}}(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{wq26:function(t,o,a){"use strict";a.r(o),a.d(o,"ShopPageModule",(function(){return F}));var l=a("ofXK"),c=a("3Pt+"),r=a("TEn/"),s=a("tyNb"),b=a("fXoL"),g=a("H+bZ"),u=a("oWMX"),d=a("CwAd");function f(n,t){if(1&n&&(b.Mb(0,"ion-segment-button",12),b.Mb(1,"ion-label"),b.hc(2),b.Lb(),b.Lb()),2&n){var e=b.Wb().$implicit;b.Zb("value",null==e?null:e.id),b.xb(2),b.ic(null==e?null:e.name)}}function p(n,t){if(1&n&&(b.Mb(0,"div"),b.gc(1,f,3,2,"ion-segment-button",11),b.Lb()),2&n){var e=t.$implicit;b.xb(1),b.Zb("ngIf",1==(null==e?null:e.status))}}function h(n,t){1&n&&(b.Mb(0,"ion-col",29),b.Mb(1,"div",30),b.Mb(2,"h6"),b.hc(3,"Sale"),b.Lb(),b.Lb(),b.Lb())}function m(n,t){1&n&&(b.Mb(0,"ion-col",29),b.Mb(1,"div",31),b.Mb(2,"h6"),b.hc(3,"New"),b.Lb(),b.Lb(),b.Lb())}function v(n,t){1&n&&b.Ib(0,"ion-col",29)}function M(n,t){if(1&n&&(b.Mb(0,"div"),b.Mb(1,"p",32),b.hc(2),b.Lb(),b.Lb()),2&n){var e=b.Wb(2).$implicit;b.xb(2),b.ic(null==e?null:e.desc)}}function x(n,t){1&n&&(b.Mb(0,"div"),b.Ib(1,"br"),b.Lb())}function y(n,t){if(1&n&&(b.Mb(0,"ion-col",33),b.Mb(1,"span"),b.hc(2),b.Lb(),b.Lb()),2&n){var e=b.Wb(2).$implicit;b.xb(2),b.jc("EGP ",null==e?null:e.price,"")}}function L(n,t){if(1&n&&(b.Mb(0,"ion-col",34),b.Mb(1,"span"),b.hc(2),b.Lb(),b.Lb()),2&n){var e=b.Wb(2).$implicit;b.xb(2),b.jc("EGP ",null==e?null:e.price,"")}}function w(n,t){if(1&n&&(b.Mb(0,"ion-col",35),b.Mb(1,"span"),b.hc(2),b.Lb(),b.Lb()),2&n){var e=b.Wb(2).$implicit;b.xb(2),b.jc("EGP ",(null==e?null:e.price)-(null==e?null:e.price)*(null==e?null:e.sale_percent)/100,"")}}function P(n,t){if(1&n){var e=b.Nb();b.Mb(0,"ion-card",15),b.Ub("click",(function(){b.bc(e);var n=b.Wb().$implicit;return b.Wb(2).goToItemDetails(n)})),b.Mb(1,"ion-grid"),b.Mb(2,"ion-row"),b.Mb(3,"ion-col",16),b.Ib(4,"img",17),b.Lb(),b.Mb(5,"ion-col",18),b.Mb(6,"ion-row"),b.Mb(7,"ion-col",19),b.Mb(8,"span",20),b.hc(9),b.Lb(),b.Lb(),b.gc(10,h,4,0,"ion-col",21),b.gc(11,m,4,0,"ion-col",21),b.gc(12,v,1,0,"ion-col",21),b.Lb(),b.gc(13,M,3,1,"div",8),b.gc(14,x,2,0,"div",8),b.Mb(15,"ion-row"),b.gc(16,y,3,1,"ion-col",22),b.gc(17,L,3,1,"ion-col",23),b.gc(18,w,3,1,"ion-col",24),b.Mb(19,"ion-col",25),b.Mb(20,"div",26),b.Ib(21,"img",27),b.Lb(),b.Lb(),b.Lb(),b.Lb(),b.Lb(),b.Lb(),b.Ib(22,"div",28),b.Lb()}if(2&n){var i=b.Wb().$implicit;b.xb(4),b.Zb("src",null==i?null:i.img1,b.dc),b.xb(5),b.ic(null==i?null:i.name),b.xb(1),b.Zb("ngIf",1==i.sale),b.xb(1),b.Zb("ngIf",0==i.sale&&1==i.new),b.xb(1),b.Zb("ngIf",0==i.sale&&0==i.new),b.xb(1),b.Zb("ngIf",null!=i.desc&&"null"!=i.desc),b.xb(1),b.Zb("ngIf",null==i.desc||"null"==i.desc),b.xb(2),b.Zb("ngIf",i.sale>0),b.xb(1),b.Zb("ngIf",0==i.sale),b.xb(1),b.Zb("ngIf",i.sale>0)}}function _(n,t){if(1&n&&(b.Mb(0,"div"),b.gc(1,P,23,10,"ion-card",14),b.Lb()),2&n){var e=t.$implicit;b.xb(1),b.Zb("ngIf",1==e.status)}}function C(n,t){if(1&n&&(b.Mb(0,"div",13),b.gc(1,_,2,1,"div",5),b.Lb()),2&n){var e=b.Wb();b.xb(1),b.Zb("ngForOf",e.data)}}function O(n,t){1&n&&(b.Mb(0,"ion-col",29),b.Mb(1,"div",30),b.Mb(2,"h6"),b.hc(3,"Sale"),b.Lb(),b.Lb(),b.Lb())}function k(n,t){1&n&&(b.Mb(0,"ion-col",29),b.Mb(1,"div",31),b.Mb(2,"h6"),b.hc(3,"New"),b.Lb(),b.Lb(),b.Lb())}function I(n,t){1&n&&b.Ib(0,"ion-col",29)}function S(n,t){if(1&n&&(b.Mb(0,"div"),b.Mb(1,"p",32),b.hc(2),b.Lb(),b.Lb()),2&n){var e=b.Wb(2).$implicit;b.xb(2),b.ic(null==e?null:e.desc)}}function Z(n,t){1&n&&(b.Mb(0,"div"),b.Ib(1,"br"),b.Lb())}function z(n,t){if(1&n){var e=b.Nb();b.Mb(0,"ion-card",15),b.Ub("click",(function(){b.bc(e);var n=b.Wb().$implicit;return b.Wb(3).goToItemDetails(n)})),b.Mb(1,"ion-grid"),b.Mb(2,"ion-row"),b.Mb(3,"ion-col",16),b.Ib(4,"img",17),b.Lb(),b.Mb(5,"ion-col",18),b.Mb(6,"ion-row"),b.Mb(7,"ion-col",19),b.Mb(8,"span",20),b.hc(9),b.Lb(),b.Lb(),b.gc(10,O,4,0,"ion-col",21),b.gc(11,k,4,0,"ion-col",21),b.gc(12,I,1,0,"ion-col",21),b.Lb(),b.gc(13,S,3,1,"div",8),b.gc(14,Z,2,0,"div",8),b.Mb(15,"ion-row"),b.Mb(16,"ion-col",34),b.Mb(17,"span"),b.hc(18),b.Lb(),b.Lb(),b.Mb(19,"ion-col",25),b.Mb(20,"div",26),b.Ib(21,"img",27),b.Lb(),b.Lb(),b.Lb(),b.Lb(),b.Lb(),b.Lb(),b.Ib(22,"div",28),b.Lb()}if(2&n){var i=b.Wb().$implicit;b.xb(4),b.Zb("src",null==i?null:i.img1,b.dc),b.xb(5),b.ic(null==i?null:i.name),b.xb(1),b.Zb("ngIf",1==i.sale),b.xb(1),b.Zb("ngIf",0==i.sale&&1==i.new),b.xb(1),b.Zb("ngIf",0==i.sale&&0==i.new),b.xb(1),b.Zb("ngIf",null!=i.desc&&"null"!=i.desc),b.xb(1),b.Zb("ngIf",null==i.desc||"null"==i.desc),b.xb(4),b.jc("EGP ",null==i?null:i.price,"")}}function N(n,t){if(1&n&&(b.Mb(0,"div"),b.gc(1,z,23,8,"ion-card",14),b.Lb()),2&n){var e=t.$implicit;b.xb(1),b.Zb("ngIf",1==e.status)}}function W(n,t){if(1&n&&(b.Mb(0,"div",13),b.gc(1,N,2,1,"div",5),b.Lb()),2&n){var e=b.Wb(2);b.xb(1),b.Zb("ngForOf",e.data)}}function j(n,t){if(1&n&&(b.Mb(0,"div"),b.gc(1,W,2,1,"div",7),b.Lb()),2&n){var e=b.Wb();b.xb(1),b.Zb("ngSwitchCase",null==e.category?null:e.category.name)}}var $,A,J,E=[{path:"",component:($=function(){function t(n,i,o,a,l){e(this,t),this.router=n,this.navCtrl=i,this.api=o,this.loading=a,this.toast=l,this.category={id:0,name:"all",created_at:"2020-08-16 13:21:19",offer_id:null,status:1,updated_at:"2020-08-17 15:24:52"},this.categories=[{id:0,name:"all",created_at:"2020-08-16 13:21:19",offer_id:null,status:1,updated_at:"2020-08-17 15:24:52"}],this.nextPageLink=null,this.data=[]}var o,a,l;return o=t,(a=[{key:"ngOnInit",value:function(){}},{key:"ionViewWillEnter",value:function(){console.log("loading shop"),this.getAllProducts()}},{key:"goToItemDetails",value:function(n){this.navCtrl.navigateRoot(["shop-item-details"],{state:{item:n}})}},{key:"back",value:function(){this.navCtrl.back()}},{key:"getAllProducts",value:function(){var t=this;this.category.name="all",console.log("shope loading"),this.loading.isLoading&&(this.loading.isLoading=!1,this.loading.dismiss()),this.loading.present(),this.api.getAllProductsWithCategories().then((function(e){console.log(e),t.data=e.products.data,t.loading.dismiss(),t.nextPageLink=e.products.next_page_url,console.log("next page"+e.next_page_url),console.log("next page"+t.nextPageLink),console.log("cat"+t.categories[0]),console.log("cat"+t.categories.length);var i,o=n(t.data);try{for(o.s();!(i=o.n()).done;){var a=i.value;a.img1="https://bugsnroses.com/"+a.img1.replace("public","storage"),a.img2="https://bugsnroses.com/"+a.img2.replace("public","storage"),a.img3="https://bugsnroses.com/"+a.img3.replace("public","storage"),a.name=JSON.parse(a.name).en,a.text=JSON.parse(a.text).en,a.category.name=JSON.parse(a.category.name).en}}catch(s){o.e(s)}finally{o.f()}if(1==t.categories.length){var l,c=n(e.categories);try{for(c.s();!(l=c.n()).done;){var r=l.value;r.name=JSON.parse(r.name).en,t.categories.push(r)}}catch(s){c.e(s)}finally{c.f()}}console.log(t.categories),console.log("next page"+e.next_page_url)}),(function(n){t.loading.dismiss(),t.toast.present(n.error.message)}))}},{key:"getAllProductsByCategory",value:function(t){var e=this;console.log("shop loading"),this.loading.present(),this.api.getProductsByCategory(t).then((function(t){console.log(t),e.loading.dismiss(),e.data=[];var i,o=n(t.data);try{for(o.s();!(i=o.n()).done;){var a=i.value;a.img1="https://bugsnroses.com/"+a.img1.replace("public","storage"),a.img2="https://bugsnroses.com/"+a.img2.replace("public","storage"),a.img3="https://bugsnroses.com/"+a.img3.replace("public","storage"),a.name=JSON.parse(a.name).en,a.text=JSON.parse(a.text).en,a.category.name=JSON.parse(a.category.name).en}}catch(l){o.e(l)}finally{o.f()}e.data=t.data,e.nextPageLink=t.next_page_url,console.log("next page"+t.next_page_url),console.log("next page"+e.nextPageLink)}),(function(n){e.loading.dismiss(),e.toast.present(n.error.message)}))}},{key:"loadNewProductsData",value:function(t){var e=this;null==this.nextPageLink||null==this.nextPageLink?(this.infiniteScroll.disabled=!0,t.target.complete()):this.api.getNextProducts(this.nextPageLink).then((function(i){console.log(i),e.infiniteScroll.disabled=!0;var o,a=n(i);try{for(a.s();!(o=a.n()).done;){var l=o.value;l.name=JSON.parse(l.name).en,l.text=JSON.parse(l.text).en,l.category.name=JSON.parse(l.category.name).en,e.data.push(l)}}catch(c){a.e(c)}finally{a.f()}t&&t.target.complete(),e.loading.isLoading&&e.loading.dismiss()}),(function(n){console.log(n),e.infiniteScroll.disabled=!0,t&&t.target.complete(),e.loading.isLoading&&e.loading.dismiss()}))}},{key:"infiniteScrollLoadMore",value:function(n){this.loadNewProductsData(n)}},{key:"segmentChanged",value:function(t){if(console.log("Segment changed",t),console.log("Segment changed",t.detail.value),0==t.detail.value)this.category.name="all",this.data=[],this.getAllProducts();else{var e,i=n(this.categories);try{for(i.s();!(e=i.n()).done;){var o=e.value;if(o.id===t.detail.value){this.category.name=o.name;break}}}catch(a){i.e(a)}finally{i.f()}this.data=[],this.getAllProductsByCategory(t.detail.value)}}}])&&i(o.prototype,a),l&&i(o,l),t}(),$.\u0275fac=function(n){return new(n||$)(b.Hb(s.g),b.Hb(r.H),b.Hb(g.a),b.Hb(u.a),b.Hb(d.a))},$.\u0275cmp=b.Bb({type:$,selectors:[["app-shop"]],viewQuery:function(n,t){var e;1&n&&b.lc(r.k,!0),2&n&&b.ac(e=b.Vb())&&(t.infiniteScroll=e.first)},decls:15,vars:5,consts:[[1,"title-row"],["size","4",1,"ion-text-start","back-container"],["src","assets/imgs/signup/back.png","alt","",3,"click"],[1,"ion-text-start","title"],["scrollable","",3,"value","ionChange"],[4,"ngFor","ngForOf"],[3,"ngSwitch"],["class","container",4,"ngSwitchCase"],[4,"ngIf"],[3,"ionInfinite"],["loadingSpinner","bubbles","loadingText","loading","color","white"],[3,"value",4,"ngIf"],[3,"value"],[1,"container"],["class","top_Card",3,"click",4,"ngIf"],[1,"top_Card",3,"click"],["size","4"],["alt","",3,"src"],["size","8",1,"ion-text-start"],["size","9",1,"ion-text-start"],[1,"card-title"],["size","3","class","ion-text-end",4,"ngIf"],["size","4","class","ion-text-start salary_discount",4,"ngIf"],["size","10","class","ion-text-start salary",4,"ngIf"],["size","6","class","ion-text-start salary",4,"ngIf"],["size","2",1,"ion-text-end"],[1,"plus"],["src","assets/imgs/shop/plus.png","alt",""],[1,"card_bottom"],["size","3",1,"ion-text-end"],[1,"sale"],[1,"new"],[1,"discription"],["size","4",1,"ion-text-start","salary_discount"],["size","10",1,"ion-text-start","salary"],["size","6",1,"ion-text-start","salary"]],template:function(n,t){1&n&&(b.Mb(0,"ion-content"),b.Mb(1,"ion-grid"),b.Mb(2,"ion-row",0),b.Mb(3,"ion-col",1),b.Mb(4,"img",2),b.Ub("click",(function(){return t.back()})),b.Lb(),b.Lb(),b.Mb(5,"ion-col",3),b.Mb(6,"span"),b.hc(7," SHOP "),b.Lb(),b.Lb(),b.Lb(),b.Lb(),b.Mb(8,"ion-segment",4),b.Ub("ionChange",(function(n){return t.segmentChanged(n)})),b.gc(9,p,2,1,"div",5),b.Lb(),b.Mb(10,"div",6),b.gc(11,C,2,1,"div",7),b.gc(12,j,2,1,"div",8),b.Lb(),b.Mb(13,"ion-infinite-scroll",9),b.Ub("ionInfinite",(function(n){return t.infiniteScrollLoadMore(n)})),b.Ib(14,"ion-infinite-scroll-content",10),b.Lb(),b.Lb()),2&n&&(b.xb(8),b.Zb("value",t.category.id),b.xb(1),b.Zb("ngForOf",t.categories),b.xb(1),b.Zb("ngSwitch",null==t.category?null:t.category.name),b.xb(1),b.Zb("ngSwitchCase","all"),b.xb(1),b.Zb("ngIf","all"!=(null==t.category?null:t.category.name)))},directives:[r.h,r.i,r.s,r.g,r.t,r.K,l.h,l.j,l.k,l.i,r.k,r.l,r.u,r.o,r.e],styles:["ion-content[_ngcontent-%COMP%]{--background:#f5f6f8}.back-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:35px;margin-left:1vw}.title-row[_ngcontent-%COMP%]{margin-top:2vh}.title[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:1.6em;color:#178dd5;font-weight:700;margin-left:5vw}ion-segment[_ngcontent-%COMP%]{margin-top:2vh}ion-segment-button[_ngcontent-%COMP%]{--indicator-color:transparent!important;--indicator-color-checked:transparent!important;color:#178dd5;text-transform:capitalize}.segment-button-checked[_ngcontent-%COMP%]{font-weight:700}ion-card[_ngcontent-%COMP%]{border-radius:5px;position:relative;text-align:center;background-size:cover!important;background-repeat:no-repeat!important;height:calc(50vw - 40px)!important;width:auto;box-shadow:0 0 1px -2px rgba(0,0,0,.2),0 0 2px 0 rgba(0,0,0,.14),0 0 5px 0 rgba(0,0,0,.12)}ion-card[_ngcontent-%COMP%]   .card_bottom[_ngcontent-%COMP%]{height:1vh;background:#ff6979}.container[_ngcontent-%COMP%]{padding-left:3vw;padding-right:3vw}.plus[_ngcontent-%COMP%]{background:#ff6979;width:6vw;height:3vh;border-radius:25px;display:flex;align-items:center;justify-content:center}.plus[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:60%}.shop[_ngcontent-%COMP%]{background:#add172;width:6vw;height:3vh;border-radius:25px;display:flex;align-items:center;justify-content:center}.shop[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:60%}.sale[_ngcontent-%COMP%]{background:#eb8f94;width:55px;height:25px;display:flex;align-items:center;justify-content:center}.sale[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:60%}.sale[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{color:#fff;font-size:1em;text-transform:uppercase}.new[_ngcontent-%COMP%]{background:#5bc1e3;width:55px;height:25px;display:flex;align-items:center;justify-content:center}.new[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:60%}.new[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{color:#fff;font-size:1em;text-transform:uppercase}.card-title[_ngcontent-%COMP%]{font-size:1.3em;font-weight:700;color:#333}.salary[_ngcontent-%COMP%]{display:flex;align-items:flex-end}.salary[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#ff6979;font-size:1em}.salary_discount[_ngcontent-%COMP%]{display:flex;align-items:flex-end}.salary_discount[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{text-decoration:line-through;color:#ff6979;font-size:1em}.discription[_ngcontent-%COMP%]{margin-left:2vw;padding-right:15vw;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}"]}),$)}],H=((J=function n(){e(this,n)}).\u0275mod=b.Fb({type:J}),J.\u0275inj=b.Eb({factory:function(n){return new(n||J)},imports:[[s.i.forChild(E)],s.i]}),J),F=((A=function n(){e(this,n)}).\u0275mod=b.Fb({type:A}),A.\u0275inj=b.Eb({factory:function(n){return new(n||A)},imports:[[l.b,c.g,r.D,H]]}),A)}}])}();