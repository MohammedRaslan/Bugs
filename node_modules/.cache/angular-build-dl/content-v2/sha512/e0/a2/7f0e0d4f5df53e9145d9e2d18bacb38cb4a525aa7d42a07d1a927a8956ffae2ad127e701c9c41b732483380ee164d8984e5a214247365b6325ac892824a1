(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{wq26:function(n,t,e){"use strict";e.r(t),e.d(t,"ShopPageModule",(function(){return $}));var i=e("ofXK"),o=e("3Pt+"),c=e("TEn/"),s=e("tyNb"),l=e("fXoL"),a=e("H+bZ"),g=e("oWMX"),r=e("CwAd");function b(n,t){if(1&n&&(l.Mb(0,"ion-segment-button",12),l.Mb(1,"ion-label"),l.hc(2),l.Lb(),l.Lb()),2&n){const n=l.Wb().$implicit;l.Zb("value",null==n?null:n.id),l.xb(2),l.ic(null==n?null:n.name)}}function d(n,t){if(1&n&&(l.Mb(0,"div"),l.gc(1,b,3,2,"ion-segment-button",11),l.Lb()),2&n){const n=t.$implicit;l.xb(1),l.Zb("ngIf",1==(null==n?null:n.status))}}function u(n,t){1&n&&(l.Mb(0,"ion-col",29),l.Mb(1,"div",30),l.Mb(2,"h6"),l.hc(3,"Sale"),l.Lb(),l.Lb(),l.Lb())}function p(n,t){1&n&&(l.Mb(0,"ion-col",29),l.Mb(1,"div",31),l.Mb(2,"h6"),l.hc(3,"New"),l.Lb(),l.Lb(),l.Lb())}function f(n,t){1&n&&l.Ib(0,"ion-col",29)}function h(n,t){if(1&n&&(l.Mb(0,"div"),l.Mb(1,"p",32),l.hc(2),l.Lb(),l.Lb()),2&n){const n=l.Wb(2).$implicit;l.xb(2),l.ic(null==n?null:n.desc)}}function m(n,t){1&n&&(l.Mb(0,"div"),l.Ib(1,"br"),l.Lb())}function M(n,t){if(1&n&&(l.Mb(0,"ion-col",33),l.Mb(1,"span"),l.hc(2),l.Lb(),l.Lb()),2&n){const n=l.Wb(2).$implicit;l.xb(2),l.jc("EGP ",null==n?null:n.price,"")}}function x(n,t){if(1&n&&(l.Mb(0,"ion-col",34),l.Mb(1,"span"),l.hc(2),l.Lb(),l.Lb()),2&n){const n=l.Wb(2).$implicit;l.xb(2),l.jc("EGP ",null==n?null:n.price,"")}}function L(n,t){if(1&n&&(l.Mb(0,"ion-col",35),l.Mb(1,"span"),l.hc(2),l.Lb(),l.Lb()),2&n){const n=l.Wb(2).$implicit;l.xb(2),l.jc("EGP ",(null==n?null:n.price)-(null==n?null:n.price)*(null==n?null:n.sale_percent)/100,"")}}function w(n,t){if(1&n){const n=l.Nb();l.Mb(0,"ion-card",15),l.Ub("click",(function(){l.bc(n);const t=l.Wb().$implicit;return l.Wb(2).goToItemDetails(t)})),l.Mb(1,"ion-grid"),l.Mb(2,"ion-row"),l.Mb(3,"ion-col",16),l.Ib(4,"img",17),l.Lb(),l.Mb(5,"ion-col",18),l.Mb(6,"ion-row"),l.Mb(7,"ion-col",19),l.Mb(8,"span",20),l.hc(9),l.Lb(),l.Lb(),l.gc(10,u,4,0,"ion-col",21),l.gc(11,p,4,0,"ion-col",21),l.gc(12,f,1,0,"ion-col",21),l.Lb(),l.gc(13,h,3,1,"div",8),l.gc(14,m,2,0,"div",8),l.Mb(15,"ion-row"),l.gc(16,M,3,1,"ion-col",22),l.gc(17,x,3,1,"ion-col",23),l.gc(18,L,3,1,"ion-col",24),l.Mb(19,"ion-col",25),l.Mb(20,"div",26),l.Ib(21,"img",27),l.Lb(),l.Lb(),l.Lb(),l.Lb(),l.Lb(),l.Lb(),l.Ib(22,"div",28),l.Lb()}if(2&n){const n=l.Wb().$implicit;l.xb(4),l.Zb("src",null==n?null:n.img1,l.dc),l.xb(5),l.ic(null==n?null:n.name),l.xb(1),l.Zb("ngIf",1==n.sale),l.xb(1),l.Zb("ngIf",0==n.sale&&1==n.new),l.xb(1),l.Zb("ngIf",0==n.sale&&0==n.new),l.xb(1),l.Zb("ngIf",null!=n.desc&&"null"!=n.desc),l.xb(1),l.Zb("ngIf",null==n.desc||"null"==n.desc),l.xb(2),l.Zb("ngIf",n.sale>0),l.xb(1),l.Zb("ngIf",0==n.sale),l.xb(1),l.Zb("ngIf",n.sale>0)}}function v(n,t){if(1&n&&(l.Mb(0,"div"),l.gc(1,w,23,10,"ion-card",14),l.Lb()),2&n){const n=t.$implicit;l.xb(1),l.Zb("ngIf",1==n.status)}}function P(n,t){if(1&n&&(l.Mb(0,"div",13),l.gc(1,v,2,1,"div",5),l.Lb()),2&n){const n=l.Wb();l.xb(1),l.Zb("ngForOf",n.data)}}function _(n,t){1&n&&(l.Mb(0,"ion-col",29),l.Mb(1,"div",30),l.Mb(2,"h6"),l.hc(3,"Sale"),l.Lb(),l.Lb(),l.Lb())}function C(n,t){1&n&&(l.Mb(0,"ion-col",29),l.Mb(1,"div",31),l.Mb(2,"h6"),l.hc(3,"New"),l.Lb(),l.Lb(),l.Lb())}function O(n,t){1&n&&l.Ib(0,"ion-col",29)}function y(n,t){if(1&n&&(l.Mb(0,"div"),l.Mb(1,"p",32),l.hc(2),l.Lb(),l.Lb()),2&n){const n=l.Wb(2).$implicit;l.xb(2),l.ic(null==n?null:n.desc)}}function I(n,t){1&n&&(l.Mb(0,"div"),l.Ib(1,"br"),l.Lb())}function k(n,t){if(1&n){const n=l.Nb();l.Mb(0,"ion-card",15),l.Ub("click",(function(){l.bc(n);const t=l.Wb().$implicit;return l.Wb(3).goToItemDetails(t)})),l.Mb(1,"ion-grid"),l.Mb(2,"ion-row"),l.Mb(3,"ion-col",16),l.Ib(4,"img",17),l.Lb(),l.Mb(5,"ion-col",18),l.Mb(6,"ion-row"),l.Mb(7,"ion-col",19),l.Mb(8,"span",20),l.hc(9),l.Lb(),l.Lb(),l.gc(10,_,4,0,"ion-col",21),l.gc(11,C,4,0,"ion-col",21),l.gc(12,O,1,0,"ion-col",21),l.Lb(),l.gc(13,y,3,1,"div",8),l.gc(14,I,2,0,"div",8),l.Mb(15,"ion-row"),l.Mb(16,"ion-col",34),l.Mb(17,"span"),l.hc(18),l.Lb(),l.Lb(),l.Mb(19,"ion-col",25),l.Mb(20,"div",26),l.Ib(21,"img",27),l.Lb(),l.Lb(),l.Lb(),l.Lb(),l.Lb(),l.Lb(),l.Ib(22,"div",28),l.Lb()}if(2&n){const n=l.Wb().$implicit;l.xb(4),l.Zb("src",null==n?null:n.img1,l.dc),l.xb(5),l.ic(null==n?null:n.name),l.xb(1),l.Zb("ngIf",1==n.sale),l.xb(1),l.Zb("ngIf",0==n.sale&&1==n.new),l.xb(1),l.Zb("ngIf",0==n.sale&&0==n.new),l.xb(1),l.Zb("ngIf",null!=n.desc&&"null"!=n.desc),l.xb(1),l.Zb("ngIf",null==n.desc||"null"==n.desc),l.xb(4),l.jc("EGP ",null==n?null:n.price,"")}}function S(n,t){if(1&n&&(l.Mb(0,"div"),l.gc(1,k,23,8,"ion-card",14),l.Lb()),2&n){const n=t.$implicit;l.xb(1),l.Zb("ngIf",1==n.status)}}function Z(n,t){if(1&n&&(l.Mb(0,"div",13),l.gc(1,S,2,1,"div",5),l.Lb()),2&n){const n=l.Wb(2);l.xb(1),l.Zb("ngForOf",n.data)}}function z(n,t){if(1&n&&(l.Mb(0,"div"),l.gc(1,Z,2,1,"div",7),l.Lb()),2&n){const n=l.Wb();l.xb(1),l.Zb("ngSwitchCase",null==n.category?null:n.category.name)}}const N=[{path:"",component:(()=>{class n{constructor(n,t,e,i,o){this.router=n,this.navCtrl=t,this.api=e,this.loading=i,this.toast=o,this.category={id:0,name:"all",created_at:"2020-08-16 13:21:19",offer_id:null,status:1,updated_at:"2020-08-17 15:24:52"},this.categories=[{id:0,name:"all",created_at:"2020-08-16 13:21:19",offer_id:null,status:1,updated_at:"2020-08-17 15:24:52"}],this.nextPageLink=null,this.data=[]}ngOnInit(){}ionViewWillEnter(){console.log("loading shop"),this.getAllProducts()}goToItemDetails(n){this.navCtrl.navigateRoot(["shop-item-details"],{state:{item:n}})}back(){this.navCtrl.back()}getAllProducts(){this.category.name="all",console.log("shope loading"),this.loading.isLoading&&(this.loading.isLoading=!1,this.loading.dismiss()),this.loading.present(),this.api.getAllProductsWithCategories().then(n=>{console.log(n),this.data=n.products.data,this.loading.dismiss(),this.nextPageLink=n.products.next_page_url,console.log("next page"+n.next_page_url),console.log("next page"+this.nextPageLink),console.log("cat"+this.categories[0]),console.log("cat"+this.categories.length);for(let t of this.data)t.img1="https://bugsnroses.com/"+t.img1.replace("public","storage"),t.img2="https://bugsnroses.com/"+t.img2.replace("public","storage"),t.img3="https://bugsnroses.com/"+t.img3.replace("public","storage"),t.name=JSON.parse(t.name).en,t.text=JSON.parse(t.text).en,t.category.name=JSON.parse(t.category.name).en;if(1==this.categories.length)for(let t of n.categories)t.name=JSON.parse(t.name).en,this.categories.push(t);console.log(this.categories),console.log("next page"+n.next_page_url)},n=>{this.loading.dismiss(),this.toast.present(n.error.message)})}getAllProductsByCategory(n){console.log("shop loading"),this.loading.present(),this.api.getProductsByCategory(n).then(n=>{console.log(n),this.loading.dismiss(),this.data=[];for(let t of n.data)t.img1="https://bugsnroses.com/"+t.img1.replace("public","storage"),t.img2="https://bugsnroses.com/"+t.img2.replace("public","storage"),t.img3="https://bugsnroses.com/"+t.img3.replace("public","storage"),t.name=JSON.parse(t.name).en,t.text=JSON.parse(t.text).en,t.category.name=JSON.parse(t.category.name).en;this.data=n.data,this.nextPageLink=n.next_page_url,console.log("next page"+n.next_page_url),console.log("next page"+this.nextPageLink)},n=>{this.loading.dismiss(),this.toast.present(n.error.message)})}loadNewProductsData(n){null==this.nextPageLink||null==this.nextPageLink?(this.infiniteScroll.disabled=!0,n.target.complete()):this.api.getNextProducts(this.nextPageLink).then(t=>{console.log(t),this.infiniteScroll.disabled=!0;for(const n of t)n.name=JSON.parse(n.name).en,n.text=JSON.parse(n.text).en,n.category.name=JSON.parse(n.category.name).en,this.data.push(n);n&&n.target.complete(),this.loading.isLoading&&this.loading.dismiss()},t=>{console.log(t),this.infiniteScroll.disabled=!0,n&&n.target.complete(),this.loading.isLoading&&this.loading.dismiss()})}infiniteScrollLoadMore(n){this.loadNewProductsData(n)}segmentChanged(n){if(console.log("Segment changed",n),console.log("Segment changed",n.detail.value),0==n.detail.value)this.category.name="all",this.data=[],this.getAllProducts();else{for(let t of this.categories)if(t.id===n.detail.value){this.category.name=t.name;break}this.data=[],this.getAllProductsByCategory(n.detail.value)}}}return n.\u0275fac=function(t){return new(t||n)(l.Hb(s.g),l.Hb(c.H),l.Hb(a.a),l.Hb(g.a),l.Hb(r.a))},n.\u0275cmp=l.Bb({type:n,selectors:[["app-shop"]],viewQuery:function(n,t){var e;1&n&&l.lc(c.k,!0),2&n&&l.ac(e=l.Vb())&&(t.infiniteScroll=e.first)},decls:15,vars:5,consts:[[1,"title-row"],["size","4",1,"ion-text-start","back-container"],["src","assets/imgs/signup/back.png","alt","",3,"click"],[1,"ion-text-start","title"],["scrollable","",3,"value","ionChange"],[4,"ngFor","ngForOf"],[3,"ngSwitch"],["class","container",4,"ngSwitchCase"],[4,"ngIf"],[3,"ionInfinite"],["loadingSpinner","bubbles","loadingText","loading","color","white"],[3,"value",4,"ngIf"],[3,"value"],[1,"container"],["class","top_Card",3,"click",4,"ngIf"],[1,"top_Card",3,"click"],["size","4"],["alt","",3,"src"],["size","8",1,"ion-text-start"],["size","9",1,"ion-text-start"],[1,"card-title"],["size","3","class","ion-text-end",4,"ngIf"],["size","4","class","ion-text-start salary_discount",4,"ngIf"],["size","10","class","ion-text-start salary",4,"ngIf"],["size","6","class","ion-text-start salary",4,"ngIf"],["size","2",1,"ion-text-end"],[1,"plus"],["src","assets/imgs/shop/plus.png","alt",""],[1,"card_bottom"],["size","3",1,"ion-text-end"],[1,"sale"],[1,"new"],[1,"discription"],["size","4",1,"ion-text-start","salary_discount"],["size","10",1,"ion-text-start","salary"],["size","6",1,"ion-text-start","salary"]],template:function(n,t){1&n&&(l.Mb(0,"ion-content"),l.Mb(1,"ion-grid"),l.Mb(2,"ion-row",0),l.Mb(3,"ion-col",1),l.Mb(4,"img",2),l.Ub("click",(function(){return t.back()})),l.Lb(),l.Lb(),l.Mb(5,"ion-col",3),l.Mb(6,"span"),l.hc(7," SHOP "),l.Lb(),l.Lb(),l.Lb(),l.Lb(),l.Mb(8,"ion-segment",4),l.Ub("ionChange",(function(n){return t.segmentChanged(n)})),l.gc(9,d,2,1,"div",5),l.Lb(),l.Mb(10,"div",6),l.gc(11,P,2,1,"div",7),l.gc(12,z,2,1,"div",8),l.Lb(),l.Mb(13,"ion-infinite-scroll",9),l.Ub("ionInfinite",(function(n){return t.infiniteScrollLoadMore(n)})),l.Ib(14,"ion-infinite-scroll-content",10),l.Lb(),l.Lb()),2&n&&(l.xb(8),l.Zb("value",t.category.id),l.xb(1),l.Zb("ngForOf",t.categories),l.xb(1),l.Zb("ngSwitch",null==t.category?null:t.category.name),l.xb(1),l.Zb("ngSwitchCase","all"),l.xb(1),l.Zb("ngIf","all"!=(null==t.category?null:t.category.name)))},directives:[c.h,c.i,c.s,c.g,c.t,c.K,i.h,i.j,i.k,i.i,c.k,c.l,c.u,c.o,c.e],styles:["ion-content[_ngcontent-%COMP%]{--background:#f5f6f8}.back-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:35px;margin-left:1vw}.title-row[_ngcontent-%COMP%]{margin-top:2vh}.title[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:1.6em;color:#178dd5;font-weight:700;margin-left:5vw}ion-segment[_ngcontent-%COMP%]{margin-top:2vh}ion-segment-button[_ngcontent-%COMP%]{--indicator-color:transparent!important;--indicator-color-checked:transparent!important;color:#178dd5;text-transform:capitalize}.segment-button-checked[_ngcontent-%COMP%]{font-weight:700}ion-card[_ngcontent-%COMP%]{border-radius:5px;position:relative;text-align:center;background-size:cover!important;background-repeat:no-repeat!important;height:calc(50vw - 40px)!important;width:auto;box-shadow:0 0 1px -2px rgba(0,0,0,.2),0 0 2px 0 rgba(0,0,0,.14),0 0 5px 0 rgba(0,0,0,.12)}ion-card[_ngcontent-%COMP%]   .card_bottom[_ngcontent-%COMP%]{height:1vh;background:#ff6979}.container[_ngcontent-%COMP%]{padding-left:3vw;padding-right:3vw}.plus[_ngcontent-%COMP%]{background:#ff6979;width:6vw;height:3vh;border-radius:25px;display:flex;align-items:center;justify-content:center}.plus[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:60%}.shop[_ngcontent-%COMP%]{background:#add172;width:6vw;height:3vh;border-radius:25px;display:flex;align-items:center;justify-content:center}.shop[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:60%}.sale[_ngcontent-%COMP%]{background:#eb8f94;width:55px;height:25px;display:flex;align-items:center;justify-content:center}.sale[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:60%}.sale[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{color:#fff;font-size:1em;text-transform:uppercase}.new[_ngcontent-%COMP%]{background:#5bc1e3;width:55px;height:25px;display:flex;align-items:center;justify-content:center}.new[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:60%}.new[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{color:#fff;font-size:1em;text-transform:uppercase}.card-title[_ngcontent-%COMP%]{font-size:1.3em;font-weight:700;color:#333}.salary[_ngcontent-%COMP%]{display:flex;align-items:flex-end}.salary[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#ff6979;font-size:1em}.salary_discount[_ngcontent-%COMP%]{display:flex;align-items:flex-end}.salary_discount[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{text-decoration:line-through;color:#ff6979;font-size:1em}.discription[_ngcontent-%COMP%]{margin-left:2vw;padding-right:15vw;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}"]}),n})()}];let W=(()=>{class n{}return n.\u0275mod=l.Fb({type:n}),n.\u0275inj=l.Eb({factory:function(t){return new(t||n)},imports:[[s.i.forChild(N)],s.i]}),n})(),$=(()=>{class n{}return n.\u0275mod=l.Fb({type:n}),n.\u0275inj=l.Eb({factory:function(t){return new(t||n)},imports:[[i.b,o.g,c.D,W]]}),n})()}}]);