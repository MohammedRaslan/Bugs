(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{wq26:function(e,t,n){"use strict";n.r(t),n.d(t,"ShopPageModule",(function(){return Pe}));var i=n("ofXK"),s=n("3Pt+"),o=n("TEn/"),a=n("tyNb"),r=n("fXoL"),c=n("H+bZ"),l=n("oWMX"),u=n("CwAd"),g=n("XNiG"),d=n("LRne"),h=n("HDdC"),b=n("quSY");class p extends b.a{constructor(e,t){super()}schedule(e,t=0){return this}}class f extends p{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){if(this.closed)return this;this.state=e;const n=this.id,i=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(i,n,t)),this.pending=!0,this.delay=t,this.id=this.id||this.requestAsyncId(i,this.id,t),this}requestAsyncId(e,t,n=0){return setInterval(e.flush.bind(e,this),n)}recycleAsyncId(e,t,n=0){if(null!==n&&this.delay===n&&!1===this.pending)return t;clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const n=this._execute(e,t);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let n=!1,i=void 0;try{this.work(e)}catch(s){n=!0,i=!!s&&s||new Error(s)}if(n)return this.unsubscribe(),i}_unsubscribe(){const e=this.id,t=this.scheduler,n=t.actions,i=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==i&&n.splice(i,1),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null}}class m extends f{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,n=0){return null!==n&&n>0||null===n&&this.delay>0?super.requestAsyncId(e,t,n):e.flush(this)}}let x=(()=>{class e{constructor(t,n=e.now){this.SchedulerAction=t,this.now=n}schedule(e,t=0,n){return new this.SchedulerAction(this,e).schedule(n,t)}}return e.now=()=>Date.now(),e})();class w extends x{constructor(e,t=x.now){super(e,()=>w.delegate&&w.delegate!==this?w.delegate.now():t()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(e,t=0,n){return w.delegate&&w.delegate!==this?w.delegate.schedule(e,t,n):super.schedule(e,t,n)}flush(e){const{actions:t}=this;if(this.active)return void t.push(e);let n;this.active=!0;do{if(n=e.execute(e.state,e.delay))break}while(e=t.shift());if(this.active=!1,n){for(;e=t.shift();)e.unsubscribe();throw n}}}class v extends w{}const y=new v(m);var M=n("7o/Q"),I=n("EY2u");let L=(()=>{class e{constructor(e,t,n){this.kind=e,this.value=t,this.error=n,this.hasValue="N"===e}observe(e){switch(this.kind){case"N":return e.next&&e.next(this.value);case"E":return e.error&&e.error(this.error);case"C":return e.complete&&e.complete()}}do(e,t,n){switch(this.kind){case"N":return e&&e(this.value);case"E":return t&&t(this.error);case"C":return n&&n()}}accept(e,t,n){return e&&"function"==typeof e.next?this.observe(e):this.do(e,t,n)}toObservable(){switch(this.kind){case"N":return Object(d.a)(this.value);case"E":return e=this.error,new h.a(t=>t.error(e));case"C":return Object(I.b)()}var e;throw new Error("unexpected notification kind value")}static createNext(t){return void 0!==t?new e("N",t):e.undefinedValueNotification}static createError(t){return new e("E",void 0,t)}static createComplete(){return e.completeNotification}}return e.completeNotification=new e("C"),e.undefinedValueNotification=new e("N",void 0),e})();class _ extends M.a{constructor(e,t,n=0){super(e),this.scheduler=t,this.delay=n}static dispatch(e){const{notification:t,destination:n}=e;t.observe(n),this.unsubscribe()}scheduleMessage(e){this.destination.add(this.scheduler.schedule(_.dispatch,this.delay,new C(e,this.destination)))}_next(e){this.scheduleMessage(L.createNext(e))}_error(e){this.scheduleMessage(L.createError(e)),this.unsubscribe()}_complete(){this.scheduleMessage(L.createComplete()),this.unsubscribe()}}class C{constructor(e,t){this.notification=e,this.destination=t}}var O=n("9ppp"),P=n("Ylt2");class k extends g.a{constructor(e=Number.POSITIVE_INFINITY,t=Number.POSITIVE_INFINITY,n){super(),this.scheduler=n,this._events=[],this._infiniteTimeWindow=!1,this._bufferSize=e<1?1:e,this._windowTime=t<1?1:t,t===Number.POSITIVE_INFINITY?(this._infiniteTimeWindow=!0,this.next=this.nextInfiniteTimeWindow):this.next=this.nextTimeWindow}nextInfiniteTimeWindow(e){const t=this._events;t.push(e),t.length>this._bufferSize&&t.shift(),super.next(e)}nextTimeWindow(e){this._events.push(new S(this._getNow(),e)),this._trimBufferThenGetEvents(),super.next(e)}_subscribe(e){const t=this._infiniteTimeWindow,n=t?this._events:this._trimBufferThenGetEvents(),i=this.scheduler,s=n.length;let o;if(this.closed)throw new O.a;if(this.isStopped||this.hasError?o=b.a.EMPTY:(this.observers.push(e),o=new P.a(this,e)),i&&e.add(e=new _(e,i)),t)for(let a=0;a<s&&!e.closed;a++)e.next(n[a]);else for(let a=0;a<s&&!e.closed;a++)e.next(n[a].value);return this.hasError?e.error(this.thrownError):this.isStopped&&e.complete(),o}_getNow(){return(this.scheduler||y).now()}_trimBufferThenGetEvents(){const e=this._getNow(),t=this._bufferSize,n=this._windowTime,i=this._events,s=i.length;let o=0;for(;o<s&&!(e-i[o].time<n);)o++;return s>t&&(o=Math.max(o,s-t)),o>0&&i.splice(0,o),i}}class S{constructor(e,t){this.time=e,this.value=t}}var N=n("KqfI");const z=new h.a(N.a);var E=n("pLZG"),j=n("vkgz"),Z=n("IzEk"),T=n("5+tZ"),W=n("lJxs"),A=n("JIr8"),$=n("eIep");function J(e){return Boolean(e.parentElement&&"picture"===e.parentElement.nodeName.toLowerCase())}function B(e){return"img"===e.nodeName.toLowerCase()}function D(e,t,n){return B(e)?n&&"srcset"in e?e.srcset=t:e.src=t:e.style.backgroundImage=`url('${t}')`,e}function H(e){return t=>{const n=t.parentElement.getElementsByTagName("source");for(let i=0;i<n.length;i++){const t=n[i].getAttribute(e);t&&("srcset"in n[i]?n[i].srcset=t:n[i].src=t)}}}n("JX91"),n("w1tV");const V=H("defaultImage"),q=H("lazyLoad"),F=H("errorImage");function G(e){return(t,n,i)=>{B(t)&&J(t)&&e(t),n&&D(t,n,i)}}const Y=G(V),K=G(q),U=G(F);function X(e,t){e.className=e.className.replace(t,"")}function R(e,t){e.className.includes(t)||(e.className+=" "+t)}let Q=(()=>{class e extends class extends class{constructor(){this.navigator="undefined"!=typeof window?window.navigator:void 0}setPlatformId(e){this.platformId=e}onDestroy(e){}onAttributeChange(e){}}{setup(e){var t;Y(e.element,e.defaultImagePath,e.useSrcset),R(e.element,"ng-lazyloading"),(t=e.element).className&&t.className.includes("ng-lazyloaded")&&X(e.element,"ng-lazyloaded")}finally(e){R(e.element,"ng-lazyloaded"),X(e.element,"ng-lazyloading")}loadImage(e){if(this.skipLazyLoading(e))return[e.imagePath];const{element:t,useSrcset:n,imagePath:i,decode:s}=e;let o;if(B(t)&&J(t)){const e=t.parentNode.cloneNode(!0);o=e.getElementsByTagName("img")[0],q(o),D(o,i,n)}else o=new Image,B(t)&&t.referrerPolicy&&(o.referrerPolicy=t.referrerPolicy),B(t)&&t.sizes&&(o.sizes=t.sizes),n&&"srcset"in o?o.srcset=i:o.src=i;return s&&o.decode?o.decode().then(()=>i):new Promise((e,t)=>{o.onload=()=>e(i),o.onerror=()=>t(null)})}setErrorImage(e,t){const{element:n,useSrcset:i,errorImagePath:s}=t;U(n,s,i),R(n,"ng-failed-lazyloaded")}setLoadedImage(e,t){const{element:n,useSrcset:i}=t;K(n,e,i)}isDisabled(){return Object(i.o)(this.platformId)&&!this.isBot()}skipLazyLoading(e){return this.isBot(e)}isBot(e){var t;return!!(null===(t=this.navigator)||void 0===t?void 0:t.userAgent)&&/googlebot|bingbot|yandex|baiduspider|facebookexternalhit|twitterbot|rogerbot|linkedinbot|embedly|quora\ link\ preview|showyoubot|outbrain|pinterest\/0\.|pinterestbot|slackbot|vkShare|W3C_Validator|whatsapp|duckduckbot/i.test(this.navigator.userAgent)}}{constructor(){super(...arguments),this.observers=new WeakMap,this.intersectionSubject=new g.a,this.uniqKey={}}getObservable(e){if(this.skipLazyLoading(e))return Object(d.a)({isIntersecting:!0});if(e.customObservable)return e.customObservable;const t=e.scrollContainer||this.uniqKey,n={root:e.scrollContainer||null};e.offset&&(n.rootMargin=e.offset+"px");let i=this.observers.get(t);return i||(i=new IntersectionObserver(e=>this.loadingCallback(e),n),this.observers.set(t,i)),i.observe(e.element),h.a.create(t=>{const n=this.intersectionSubject.pipe(Object(E.a)(t=>t.target===e.element)).subscribe(t);return()=>{n.unsubscribe(),i.unobserve(e.element)}})}isVisible(e){return e.isIntersecting}loadingCallback(e){e.forEach(e=>this.intersectionSubject.next(e))}}return e.\u0275fac=function(t){return ee(t||e)},e.\u0275prov=r.Db({token:e,factory:e.\u0275fac}),e})();const ee=r.Ob(Q),te=new r.q("LazyLoadImageHooks");let ne=(()=>{class e{constructor(e,t,n,i){this.onStateChange=new r.n,this.elementRef=e,this.ngZone=t,this.propertyChanges$=new k,this.hooks=i,this.hooks.setPlatformId(n),this.uid=Math.random().toString(36).substr(2,9)}ngOnChanges(){!0!==this.debug||this.debugSubscription||(this.debugSubscription=this.onStateChange.subscribe(e=>console.log(e))),this.propertyChanges$.next({element:this.elementRef.nativeElement,imagePath:this.lazyImage,defaultImagePath:this.defaultImage,errorImagePath:this.errorImage,useSrcset:this.useSrcset,offset:this.offset?0|this.offset:0,scrollContainer:this.scrollTarget,customObservable:this.customObservable,decode:this.decode,onStateChange:this.onStateChange,id:this.uid})}ngAfterContentInit(){if(this.hooks.isDisabled())return null;this.ngZone.runOutsideAngular(()=>{this.loadSubscription=this.propertyChanges$.pipe(Object(j.a)(e=>this.hooks.onAttributeChange(e)),Object(j.a)(e=>e.onStateChange.emit({reason:"setup"})),Object(j.a)(e=>this.hooks.setup(e)),Object($.a)(e=>e.imagePath?this.hooks.getObservable(e).pipe(function(e,t){return n=>n.pipe(Object(j.a)(e=>t.onStateChange.emit({reason:"observer-emit",data:e})),Object(E.a)(n=>e.isVisible(n,t)),Object(Z.a)(1),Object(j.a)(()=>t.onStateChange.emit({reason:"start-loading"})),Object(T.a)(()=>e.loadImage(t)),Object(j.a)(()=>t.onStateChange.emit({reason:"mount-image"})),Object(j.a)(n=>e.setLoadedImage(n,t)),Object(j.a)(()=>t.onStateChange.emit({reason:"loading-succeeded"})),Object(W.a)(()=>!0),Object(A.a)(n=>(t.onStateChange.emit({reason:"loading-failed",data:n}),e.setErrorImage(n,t),Object(d.a)(!1))),Object(j.a)(()=>{t.onStateChange.emit({reason:"finally"}),e.finally(t)}))}(this.hooks,e)):z)).subscribe({next:()=>null})})}ngOnDestroy(){var e,t;this.propertyChanges$.pipe(Object(Z.a)(1)).subscribe({next:e=>this.hooks.onDestroy(e)}).unsubscribe(),null===(e=this.loadSubscription)||void 0===e||e.unsubscribe(),null===(t=this.debugSubscription)||void 0===t||t.unsubscribe()}}return e.\u0275fac=function(t){return new(t||e)(r.Hb(r.l),r.Hb(r.z),r.Hb(r.B),r.Hb(te))},e.\u0275dir=r.Cb({type:e,selectors:[["","lazyLoad",""]],inputs:{lazyImage:["lazyLoad","lazyImage"],defaultImage:"defaultImage",errorImage:"errorImage",scrollTarget:"scrollTarget",customObservable:"customObservable",offset:"offset",useSrcset:"useSrcset",decode:"decode",debug:"debug"},outputs:{onStateChange:"onStateChange"},features:[r.vb]}),e})(),ie=(()=>{class e{}return e.\u0275mod=r.Fb({type:e}),e.\u0275inj=r.Eb({factory:function(t){return new(t||e)},providers:[{provide:te,useClass:Q}]}),e})();function se(e,t){if(1&e&&(r.Mb(0,"ion-segment-button",12),r.Mb(1,"ion-label"),r.hc(2),r.Lb(),r.Lb()),2&e){const e=r.Wb().$implicit;r.Zb("value",null==e?null:e.id),r.xb(2),r.ic(null==e?null:e.name)}}function oe(e,t){if(1&e&&(r.Mb(0,"div"),r.gc(1,se,3,2,"ion-segment-button",11),r.Lb()),2&e){const e=t.$implicit;r.xb(1),r.Zb("ngIf",1==(null==e?null:e.status))}}function ae(e,t){1&e&&(r.Mb(0,"ion-col",29),r.Mb(1,"div",30),r.Mb(2,"h6"),r.hc(3,"Sale"),r.Lb(),r.Lb(),r.Lb())}function re(e,t){1&e&&(r.Mb(0,"ion-col",29),r.Mb(1,"div",31),r.Mb(2,"h6"),r.hc(3,"New"),r.Lb(),r.Lb(),r.Lb())}function ce(e,t){1&e&&r.Ib(0,"ion-col",29)}function le(e,t){if(1&e&&(r.Mb(0,"div"),r.Mb(1,"p",32),r.hc(2),r.Lb(),r.Lb()),2&e){const e=r.Wb(2).$implicit;r.xb(2),r.ic(null==e?null:e.desc)}}function ue(e,t){1&e&&(r.Mb(0,"div"),r.Ib(1,"br"),r.Lb())}function ge(e,t){if(1&e&&(r.Mb(0,"ion-col",33),r.Mb(1,"span"),r.hc(2),r.Lb(),r.Lb()),2&e){const e=r.Wb(2).$implicit;r.xb(2),r.jc("EGP ",null==e?null:e.price,"")}}function de(e,t){if(1&e&&(r.Mb(0,"ion-col",34),r.Mb(1,"span"),r.hc(2),r.Lb(),r.Lb()),2&e){const e=r.Wb(2).$implicit;r.xb(2),r.jc("EGP ",null==e?null:e.price,"")}}function he(e,t){if(1&e&&(r.Mb(0,"ion-col",35),r.Mb(1,"span"),r.hc(2),r.Lb(),r.Lb()),2&e){const e=r.Wb(2).$implicit;r.xb(2),r.jc("EGP ",(null==e?null:e.price)-(null==e?null:e.price)*(null==e?null:e.sale_percent)/100,"")}}function be(e,t){if(1&e){const e=r.Nb();r.Mb(0,"ion-card",15),r.Ub("click",(function(){r.bc(e);const t=r.Wb().$implicit;return r.Wb(2).goToItemDetails(t)})),r.Mb(1,"ion-grid"),r.Mb(2,"ion-row"),r.Mb(3,"ion-col",16),r.Ib(4,"img",17),r.Lb(),r.Mb(5,"ion-col",18),r.Mb(6,"ion-row"),r.Mb(7,"ion-col",19),r.Mb(8,"span",20),r.hc(9),r.Lb(),r.Lb(),r.gc(10,ae,4,0,"ion-col",21),r.gc(11,re,4,0,"ion-col",21),r.gc(12,ce,1,0,"ion-col",21),r.Lb(),r.gc(13,le,3,1,"div",8),r.gc(14,ue,2,0,"div",8),r.Mb(15,"ion-row"),r.gc(16,ge,3,1,"ion-col",22),r.gc(17,de,3,1,"ion-col",23),r.gc(18,he,3,1,"ion-col",24),r.Mb(19,"ion-col",25),r.Mb(20,"div",26),r.Ib(21,"img",27),r.Lb(),r.Lb(),r.Lb(),r.Lb(),r.Lb(),r.Lb(),r.Ib(22,"div",28),r.Lb()}if(2&e){const e=r.Wb().$implicit,t=r.Wb(2);r.xb(4),r.Zb("defaultImage",t.lazyImage)("lazyLoad",null==e?null:e.img1),r.xb(5),r.ic(null==e?null:e.name),r.xb(1),r.Zb("ngIf",1==e.sale),r.xb(1),r.Zb("ngIf",0==e.sale&&1==e.new),r.xb(1),r.Zb("ngIf",0==e.sale&&0==e.new),r.xb(1),r.Zb("ngIf",null!=e.desc&&"null"!=e.desc),r.xb(1),r.Zb("ngIf",null==e.desc||"null"==e.desc),r.xb(2),r.Zb("ngIf",e.sale>0),r.xb(1),r.Zb("ngIf",0==e.sale),r.xb(1),r.Zb("ngIf",e.sale>0)}}function pe(e,t){if(1&e&&(r.Mb(0,"div"),r.gc(1,be,23,11,"ion-card",14),r.Lb()),2&e){const e=t.$implicit;r.xb(1),r.Zb("ngIf",1==e.status)}}function fe(e,t){if(1&e&&(r.Mb(0,"div",13),r.gc(1,pe,2,1,"div",5),r.Lb()),2&e){const e=r.Wb();r.xb(1),r.Zb("ngForOf",e.data)}}function me(e,t){1&e&&(r.Mb(0,"ion-col",29),r.Mb(1,"div",30),r.Mb(2,"h6"),r.hc(3,"Sale"),r.Lb(),r.Lb(),r.Lb())}function xe(e,t){1&e&&(r.Mb(0,"ion-col",29),r.Mb(1,"div",31),r.Mb(2,"h6"),r.hc(3,"New"),r.Lb(),r.Lb(),r.Lb())}function we(e,t){1&e&&r.Ib(0,"ion-col",29)}function ve(e,t){if(1&e&&(r.Mb(0,"div"),r.Mb(1,"p",32),r.hc(2),r.Lb(),r.Lb()),2&e){const e=r.Wb(2).$implicit;r.xb(2),r.ic(null==e?null:e.desc)}}function ye(e,t){1&e&&(r.Mb(0,"div"),r.Ib(1,"br"),r.Lb())}function Me(e,t){if(1&e){const e=r.Nb();r.Mb(0,"ion-card",15),r.Ub("click",(function(){r.bc(e);const t=r.Wb().$implicit;return r.Wb(3).goToItemDetails(t)})),r.Mb(1,"ion-grid"),r.Mb(2,"ion-row"),r.Mb(3,"ion-col",16),r.Ib(4,"img",36),r.Lb(),r.Mb(5,"ion-col",18),r.Mb(6,"ion-row"),r.Mb(7,"ion-col",19),r.Mb(8,"span",20),r.hc(9),r.Lb(),r.Lb(),r.gc(10,me,4,0,"ion-col",21),r.gc(11,xe,4,0,"ion-col",21),r.gc(12,we,1,0,"ion-col",21),r.Lb(),r.gc(13,ve,3,1,"div",8),r.gc(14,ye,2,0,"div",8),r.Mb(15,"ion-row"),r.Mb(16,"ion-col",34),r.Mb(17,"span"),r.hc(18),r.Lb(),r.Lb(),r.Mb(19,"ion-col",25),r.Mb(20,"div",26),r.Ib(21,"img",27),r.Lb(),r.Lb(),r.Lb(),r.Lb(),r.Lb(),r.Lb(),r.Ib(22,"div",28),r.Lb()}if(2&e){const e=r.Wb().$implicit;r.xb(4),r.Zb("src",null==e?null:e.img1,r.dc),r.xb(5),r.ic(null==e?null:e.name),r.xb(1),r.Zb("ngIf",1==e.sale),r.xb(1),r.Zb("ngIf",0==e.sale&&1==e.new),r.xb(1),r.Zb("ngIf",0==e.sale&&0==e.new),r.xb(1),r.Zb("ngIf",null!=e.desc&&"null"!=e.desc),r.xb(1),r.Zb("ngIf",null==e.desc||"null"==e.desc),r.xb(4),r.jc("EGP ",null==e?null:e.price,"")}}function Ie(e,t){if(1&e&&(r.Mb(0,"div"),r.gc(1,Me,23,8,"ion-card",14),r.Lb()),2&e){const e=t.$implicit;r.xb(1),r.Zb("ngIf",1==e.status)}}function Le(e,t){if(1&e&&(r.Mb(0,"div",13),r.gc(1,Ie,2,1,"div",5),r.Lb()),2&e){const e=r.Wb(2);r.xb(1),r.Zb("ngForOf",e.data)}}function _e(e,t){if(1&e&&(r.Mb(0,"div"),r.gc(1,Le,2,1,"div",7),r.Lb()),2&e){const e=r.Wb();r.xb(1),r.Zb("ngSwitchCase",null==e.category?null:e.category.name)}}const Ce=[{path:"",component:(()=>{class e{constructor(e,t,n,i,s){this.router=e,this.navCtrl=t,this.api=n,this.loading=i,this.toast=s,this.lazyImage="https://proofmart.com/wp-content/uploads/2020/09/loading-icon-2-product.png",this.category={id:0,name:"all",created_at:"2020-08-16 13:21:19",offer_id:null,status:1,updated_at:"2020-08-17 15:24:52"},this.categories=[{id:0,name:"all",created_at:"2020-08-16 13:21:19",offer_id:null,status:1,updated_at:"2020-08-17 15:24:52"}],this.nextPageLink=null,this.data=[]}ngOnInit(){}ionViewWillEnter(){console.log("loading shop"),this.getAllProducts()}goToItemDetails(e){this.navCtrl.navigateRoot(["shop-item-details"],{state:{item:e}})}back(){this.navCtrl.back()}getAllProducts(){this.category.name="all",console.log("shope loading"),this.loading.isLoading&&(this.loading.isLoading=!1,this.loading.dismiss()),this.loading.present(),this.api.getAllProductsWithCategories().then(e=>{console.log(e),this.data=e.products.data,this.loading.dismiss(),this.nextPageLink=e.products.next_page_url,console.log("next page"+e.next_page_url),console.log("next page"+this.nextPageLink),console.log("cat"+this.categories[0]),console.log("cat"+this.categories.length);for(let t of this.data)t.img1="https://bugsnroses.com/"+t.img1.replace("public","storage"),t.img2="https://bugsnroses.com/"+t.img2.replace("public","storage"),t.img3="https://bugsnroses.com/"+t.img3.replace("public","storage"),t.name=JSON.parse(t.name).en,t.text=JSON.parse(t.text).en,t.category.name=JSON.parse(t.category.name).en;if(1==this.categories.length)for(let t of e.categories)t.name=JSON.parse(t.name).en,this.categories.push(t);console.log(this.categories),console.log("next page"+e.next_page_url)},e=>{this.loading.dismiss(),this.toast.present(e.error.message)})}getAllProductsByCategory(e){console.log("shop loading"),this.loading.present(),this.api.getProductsByCategory(e).then(e=>{console.log(e),this.loading.dismiss(),this.data=[];for(let t of e.data)t.img1="https://bugsnroses.com/"+t.img1.replace("public","storage"),t.img2="https://bugsnroses.com/"+t.img2.replace("public","storage"),t.img3="https://bugsnroses.com/"+t.img3.replace("public","storage"),t.name=JSON.parse(t.name).en,t.text=JSON.parse(t.text).en,t.category.name=JSON.parse(t.category.name).en;this.data=e.data,this.nextPageLink=e.next_page_url,console.log("next page"+e.next_page_url),console.log("next page"+this.nextPageLink)},e=>{this.loading.dismiss(),this.toast.present(e.error.message)})}loadNewProductsData(e){null==this.nextPageLink||null==this.nextPageLink?(this.infiniteScroll.disabled=!0,e.target.complete()):this.api.getNextProducts(this.nextPageLink).then(t=>{console.log("next page result "),console.log(t),this.infiniteScroll.disabled=!0;for(const e of t.products.data)e.name=JSON.parse(e.name).en,e.text=JSON.parse(e.text).en,e.category.name=JSON.parse(e.category.name).en,e.img1="https://bugsnroses.com/"+e.img1.replace("public","storage"),e.img2="https://bugsnroses.com/"+e.img2.replace("public","storage"),e.img3="https://bugsnroses.com/"+e.img3.replace("public","storage"),this.data.push(e);this.nextPageLink=t.products.next_page_url,e&&e.target.complete(),this.loading.isLoading&&this.loading.dismiss()},t=>{console.log(t),this.infiniteScroll.disabled=!0,e&&e.target.complete(),this.loading.isLoading&&this.loading.dismiss()})}infiniteScrollLoadMore(e){this.loadNewProductsData(e)}segmentChanged(e){if(console.log("Segment changed",e),console.log("Segment changed",e.detail.value),0==e.detail.value)this.category.name="all",this.data=[],this.getAllProducts();else{for(let t of this.categories)if(t.id===e.detail.value){this.category.name=t.name;break}this.data=[],this.getAllProductsByCategory(e.detail.value)}}}return e.\u0275fac=function(t){return new(t||e)(r.Hb(a.g),r.Hb(o.H),r.Hb(c.a),r.Hb(l.a),r.Hb(u.a))},e.\u0275cmp=r.Bb({type:e,selectors:[["app-shop"]],viewQuery:function(e,t){var n;1&e&&r.lc(o.k,!0),2&e&&r.ac(n=r.Vb())&&(t.infiniteScroll=n.first)},decls:15,vars:5,consts:[[1,"title-row"],["size","4",1,"ion-text-start","back-container"],["src","assets/imgs/signup/back.png","alt","",3,"click"],[1,"ion-text-start","title"],["scrollable","",3,"value","ionChange"],[4,"ngFor","ngForOf"],[3,"ngSwitch"],["class","container",4,"ngSwitchCase"],[4,"ngIf"],[3,"ionInfinite"],["loadingSpinner","bubbles","loadingText","loading","color","white"],[3,"value",4,"ngIf"],[3,"value"],[1,"container"],["class","top_Card",3,"click",4,"ngIf"],[1,"top_Card",3,"click"],["size","4"],["alt","",3,"defaultImage","lazyLoad"],["size","8",1,"ion-text-start"],["size","9",1,"ion-text-start"],[1,"card-title"],["size","3","class","ion-text-end",4,"ngIf"],["size","4","class","ion-text-start salary_discount",4,"ngIf"],["size","10","class","ion-text-start salary",4,"ngIf"],["size","6","class","ion-text-start salary",4,"ngIf"],["size","2",1,"ion-text-end"],[1,"plus"],["src","assets/imgs/shop/plus.png","alt",""],[1,"card_bottom"],["size","3",1,"ion-text-end"],[1,"sale"],[1,"new"],[1,"discription"],["size","4",1,"ion-text-start","salary_discount"],["size","10",1,"ion-text-start","salary"],["size","6",1,"ion-text-start","salary"],["alt","",3,"src"]],template:function(e,t){1&e&&(r.Mb(0,"ion-content"),r.Mb(1,"ion-grid"),r.Mb(2,"ion-row",0),r.Mb(3,"ion-col",1),r.Mb(4,"img",2),r.Ub("click",(function(){return t.back()})),r.Lb(),r.Lb(),r.Mb(5,"ion-col",3),r.Mb(6,"span"),r.hc(7," SHOP "),r.Lb(),r.Lb(),r.Lb(),r.Lb(),r.Mb(8,"ion-segment",4),r.Ub("ionChange",(function(e){return t.segmentChanged(e)})),r.gc(9,oe,2,1,"div",5),r.Lb(),r.Mb(10,"div",6),r.gc(11,fe,2,1,"div",7),r.gc(12,_e,2,1,"div",8),r.Lb(),r.Mb(13,"ion-infinite-scroll",9),r.Ub("ionInfinite",(function(e){return t.infiniteScrollLoadMore(e)})),r.Ib(14,"ion-infinite-scroll-content",10),r.Lb(),r.Lb()),2&e&&(r.xb(8),r.Zb("value",t.category.id),r.xb(1),r.Zb("ngForOf",t.categories),r.xb(1),r.Zb("ngSwitch",null==t.category?null:t.category.name),r.xb(1),r.Zb("ngSwitchCase","all"),r.xb(1),r.Zb("ngIf","all"!=(null==t.category?null:t.category.name)))},directives:[o.h,o.i,o.s,o.g,o.t,o.K,i.h,i.j,i.k,i.i,o.k,o.l,o.u,o.o,o.e,ne],styles:["ion-content[_ngcontent-%COMP%]{--background:#f5f6f8}.back-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:35px;margin-left:1vw}.title-row[_ngcontent-%COMP%]{margin-top:2vh}.title[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:1.6em;color:#178dd5;font-weight:700;margin-left:5vw}ion-segment[_ngcontent-%COMP%]{margin-top:2vh}ion-segment-button[_ngcontent-%COMP%]{--indicator-color:transparent!important;--indicator-color-checked:transparent!important;color:#178dd5;text-transform:capitalize}.segment-button-checked[_ngcontent-%COMP%]{font-weight:700}ion-card[_ngcontent-%COMP%]{border-radius:5px;position:relative;text-align:center;background-size:cover!important;background-repeat:no-repeat!important;height:calc(50vw - 40px)!important;width:auto;box-shadow:0 0 1px -2px rgba(0,0,0,.2),0 0 2px 0 rgba(0,0,0,.14),0 0 5px 0 rgba(0,0,0,.12)}ion-card[_ngcontent-%COMP%]   .card_bottom[_ngcontent-%COMP%]{height:1vh;background:#ff6979}.container[_ngcontent-%COMP%]{padding-left:3vw;padding-right:3vw}.plus[_ngcontent-%COMP%]{background:#ff6979;width:6vw;height:3vh;border-radius:25px;display:flex;align-items:center;justify-content:center}.plus[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:60%}.shop[_ngcontent-%COMP%]{background:#add172;width:6vw;height:3vh;border-radius:25px;display:flex;align-items:center;justify-content:center}.shop[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:60%}.sale[_ngcontent-%COMP%]{background:#eb8f94;width:55px;height:25px;display:flex;align-items:center;justify-content:center}.sale[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:60%}.sale[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{color:#fff;font-size:1em;text-transform:uppercase}.new[_ngcontent-%COMP%]{background:#5bc1e3;width:55px;height:25px;display:flex;align-items:center;justify-content:center}.new[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:60%}.new[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{color:#fff;font-size:1em;text-transform:uppercase}.card-title[_ngcontent-%COMP%]{font-size:1.3em;font-weight:700;color:#333}.salary[_ngcontent-%COMP%]{display:flex;align-items:flex-end}.salary[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#ff6979;font-size:1em}.salary_discount[_ngcontent-%COMP%]{display:flex;align-items:flex-end}.salary_discount[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{text-decoration:line-through;color:#ff6979;font-size:1em}.discription[_ngcontent-%COMP%]{margin-left:2vw;padding-right:15vw;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}"]}),e})()}];let Oe=(()=>{class e{}return e.\u0275mod=r.Fb({type:e}),e.\u0275inj=r.Eb({factory:function(t){return new(t||e)},imports:[[a.i.forChild(Ce)],a.i]}),e})(),Pe=(()=>{class e{}return e.\u0275mod=r.Fb({type:e}),e.\u0275inj=r.Eb({factory:function(t){return new(t||e)},imports:[[i.b,s.g,o.D,ie,Oe]]}),e})()}}]);